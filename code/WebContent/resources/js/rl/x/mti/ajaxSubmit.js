orderjs.define("x:mti.ajaxSubmit",["lib.rpc.SdtHelper"],function(){function r(){var r=rl.page.getOpener();if(r)if(rl.isObject(r.rlx)&&rl.isObject(r.rlx.mti)&&rl.isObject(r.rlx.mti.listPageGrid)){var e=r.rlx.mti.listPageGrid;rl.isFunction(e.load)&&e.load()}else r.location&&r.location.reload()}var e=rl.createNamespace("rlx.mti");rl.ext(e,{ajaxSubmit:function(r,l,t){var i=rl.isNonNullStr(r)||rl.$(r).isTag("form")?{sendData:r}:r,n=new rl.rpc.SdtHelper({expectRspType:"json",async:!1}),a=e.ajaxSubmitHandlers;return rl.isNonNullStr(l)&&(l=a[l]),rl.isNonNullStr(t)&&(t=a[t]),rl.isFunction(l)||(l=a.showAlert),rl.isFunction(t)||(t=a.showAlert),rl.ext(i,{onSuccess:l,onFailure:t}),n.request(i),n},ajaxSubmitHandlers:{showAlert:function(r,e){alert(e)},back:function(r,e){alert(e),rl.rpc.isSdtOk(r)&&history.back()},close:function(r,e){alert(e),rl.rpc.isSdtOk(r)&&rl.page.close()},closeAndRefreshOpener:function(r,e){if(alert(e),rl.rpc.isSdtOk(r)){var l=rl.page.getOpener();l&&l.location&&l.location.reload(),rl.page.close()}},closeAndRefreshOpenerGrid:function(e,l){alert(l),rl.rpc.isSdtOk(e)&&(r(),rl.page.close())},refreshOpenerGrid:function(e,l){alert(l),rl.rpc.isSdtOk(e)&&r()}}})});