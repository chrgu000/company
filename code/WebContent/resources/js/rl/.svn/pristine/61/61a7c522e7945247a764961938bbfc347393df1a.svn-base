orderjs.define("x:mti.SimpleTabPanel",["gui.engine","app.deco.TabsDecorator","css>rl:tabs_decorator"],function(){rl.createNamespace("rlx.mti"),rlx.mti.SimpleTabPanel=rl.createClass({parent:rl.gui.ControlBase,construct:function(t){rl.isPrototyping(arguments[0])||(rlx.mti.SimpleTabPanel.parent.call(this,t),this.initialize())},members:{tabs:null,tabsDecoratorOptions:null,tabsDecorator:null,css:"",bodyComps:null,_htmlTpl:new rl.HtmlTpl('<div id="{id}" class="rl_tabs_decorator {css}"><div class="deco_tabbar"><ul>{tabbarHtml}</ul></div><div class="deco_tab_stack">{bodyStackHtml}</div></div>'),_tabHeadTpl:new rl.HtmlTpl('<li class="deco_tab">{caption}</li>'),_tabBodyTpl:new rl.HtmlTpl('<div id="{bodyId}" class="deco_tab_body">{content}</div>'),initialize:function(){rl.isNonNullStr(this.id)||(this.id=this.autoId()),this.dw=new rl.dom.DomWrap,this.bodyComps=[],this._bodyIdList=[],this.initDecorator(),this.initBodyComps(),this.on("render",this.decoTabsOnRender,this),this.autoRenderOnReady&&rl.onReady(this.render,this)},initDecorator:function(){this.tabsDecorator||(this.tabsDecorator=new rl.deco.TabsDecorator(rl.ext({autoDecorate:!1},this.tabsDecoratorOptions)))},initBodyComps:function(){var t=this.bodyComps;Array.each(function(i){var e=null,s=i.bodyComp;rl.isObject(s)&&(e=s instanceof rl.gui.ComponentBase?s:this.createBodyComp(s)),t.push(e)},this.tabs,this)},createBodyComp:function(t){var i=rl.ext({},t),e=i.ctype;return rl.isNonNullStr(e)&&(e=rl.gui.getCompType(e)),rl.isFunction(e)&&e.prototype instanceof rl.gui.ComponentBase?(delete i.ctype,new e(rl.fill({autoRenderOnReady:!1},i))):(rl.debug(this+"-> createBodyComp(): Invalid ctype = "+field.viewType,"err"),null)},render:function(t){if(this._rendered)return this;t=this.getRenderTarget(t);var i=rl.dom.insertHtml(this.renderPosition,this.getRenderHtml(),t);return this.dw.setTarget(i),this.iniStyle&&this.dw.setStyle(this.iniStyle),this._rendered=!0,this.fireEvent("render"),this},renderBodyComps:function(){var t=this.bodyComps,i=this._bodyIdList;Array.each(function(t,e){rl.debug(this+" comp = "+t),rl.isObject(t)&&t.render(i[e]),rl.dir(t)},t,this)},getRenderHtml:function(){var t=this.getAllHtml();return this._htmlTpl.assign({id:this.id,css:this.css,tabbarHtml:t.tabbar,bodyStackHtml:t.bodyStack})},getAllHtml:function(){var t="",i="",e=this.id,s=this._tabHeadTpl,r=this._tabBodyTpl;return Array.each(function(o,n){var a=e+"_"+o.name+"_"+n;this._bodyIdList.push(a),t+=s.assign({caption:o.caption}),i+=r.assign({bodyId:a,content:""})},this.tabs,this),{tabbar:t,bodyStack:i}},decoTabsOnRender:function(){this.tabsDecorator.target=this.dw.dom,this.tabsDecorator.decorate(),this.renderBodyComps(),Function.delay(this.updateView,500,this)},updateView:function(){var t=this.dw.dom.parentNode;this.setWidth(t.offsetWidth),this.setHeight(t.offsetHeight)},setWidth:function(t){return this.dw.setWidth(t),Array.each(function(i){rl.isObject(i)&&i.setWidth(t)},this.bodyComps,this),this},setHeight:function(t){var i=this.dw.dom.firstChild.offsetHeight;return this.dw.setHeight(t),Array.each(function(e){rl.isObject(e)&&e.setHeight(parseInt(t)-i)},this.bodyComps,this),this},toString:function(){return"[object rlx.mti.SimpleTabPanel]"}}})});