orderjs.define("app.dataBox.KpiViewNodeDetail",["app.dataBox.engine","css>rl:databox"],function(){rl.dataBox.KpiViewNodeDetail=rl.createClass({parent:rl.dataBox.KpiViewHtml,construct:function(t){rl.isPrototyping(arguments[0])||rl.dataBox.KpiViewNodeDetail.parent.call(this,t)},members:{css:"",title:"",titleAlign:"l",thumbnail:"",thumbnailCss:"",thumbnailPosition:"lm",thumbnailOverlayIcon:"",thumbnailOverlayIconPosition:"bl",thumbnailText:"",summary:null,summaryViewType:"",summaryViewOptions:null,moreLink:"",moreLinkPosition:"tr",detail:"",detailHeight:"auto",detailMaxHeight:"",dataConvert:null,dataConvertScope:null,autoAdjustDetailSize:!1,_htmlTpl:new rl.HtmlTpl('<div id="{id}" class="rl_databox_node_detail {css}">{titleHtml}<table class="l_summary" border="0" cellspacing="0" cellpadding="0"><tr>{leftThumbnailHtml}{summaryWrapperHtml}{rightThumbnailHtml}</tr></table>{detailHtml}</div>'),_titleTpl:new rl.HtmlTpl('<div id="{titleCtnId}" class="title {alignCss}">{title}</div>'),_thumbnailTpl:new rl.HtmlTpl('<td class="thumbnail_ctn {css}"><img id="{thumbnailId}" class="thumbnail" src="{src}" />{overlayIconHtml}{thumbnailTextHtml}</td>'),_thumbnailOverlayIconTpl:new rl.HtmlTpl('<div style="height:1px;"><img id="{thumbnailOverlayIconId}" class="overlay_icon" src="{src}" /></div>'),_thumbnailTextTpl:new rl.HtmlTpl('<div id="{thumbnailTextCtnId}" class="text">{text}</div>'),_moreLinkTpl:new rl.HtmlTpl('<div id="{moreLinkCtnId}" class="more_link {alignCss}">{moreLink}</div>'),_summaryWrapperTpl:new rl.HtmlTpl('<td>{topMoreLinkHtml}<div id="{summaryCtnId}" class="summary_ctn">{summary}</div>{bottomMoreLinkHtml}</td>'),_detailTpl:new rl.HtmlTpl('<div id="{detailCtnId}" class="detail">{detail}</div>'),_titleAlign2Css:{l:"title_left",c:"title_center",r:"title_right"},_thumbnailVAlign2Css:{t:"thumbnail_top",m:"thumbnail_middle",b:"thumbnail_bottom"},_moreLinkAlign2Css:{l:"more_link_left",c:"more_link_center",r:"more_link_right"},initialize:function(){rl.isNonNullStr(this.id)||(this.id=this.autoId());var t=this.id;this.titleCtnId=t+"_titleCtn",this.thumbnailId=t+"_thumbnail",this.thumbnailOverlayIconId=t+"_thumbnailOverlayIcon",this.thumbnailTextCtnId=t+"_thumbnailTextCtn",this.moreLinkCtnId=t+"_moreLinkCtn",this.summaryCtnId=t+"_summaryCtn",this.detailCtnId=t+"_detailCtn",(this.summaryView||this.summaryViewType)&&(this.initSummaryView(),this.on("render",this._renderSummaryView,this)),this.dw=new rl.dom.DomWrap,this.autoRenderOnReady&&rl.onReady(this.render,this)},getRenderHtml:function(){var t=this._getThumbnailDetail(),i=this._getMoreLinkDetail();return this._htmlTpl.assign({id:this.id,css:this.css,titleHtml:this._getTitleHtml(),summaryWrapperHtml:this._getSummaryWrapperHtml(),leftThumbnailHtml:t.lHtml,rightThumbnailHtml:t.rHtml,topMoreLinkHtml:i.tHtml,bottomMoreLinkHtml:i.bHtml,detailHtml:this._getDetailHtml()})},_getTitleHtml:function(){var t=this.title;if(!rl.isNonNullStr(t))return"";var i="";return this._titleTpl.assign({titleCtnId:this.titleCtnId,alignCss:i,title:t})},_getThumbnailDetail:function(){var t=this.thumbnail;if(!rl.isNonNullStr(t))return{};var i,l,e,a={},n=this.thumbnailPosition.toLowerCase()||"lm";return i=n.charAt(0),l=n.charAt(1),e=this._thumbnailVAlign2Css[l],a[i+"Html"]=this._thumbnailTpl.assign({thumbnailId:this.thumbnailId,src:t,css:e+" "+this.thumbnailCss,overlayIconHtml:this._getThumbnailOverlayIconHtml(),thumbnailTextHtml:this._getThumbnailTextHtml()}),a},_getThumbnailOverlayIconHtml:function(){var t=this.thumbnailOverlayIcon;return rl.isNonNullStr(t)?this._thumbnailOverlayIconTpl.assign({thumbnailOverlayIconId:this.thumbnailOverlayIconId,src:t}):""},_getThumbnailTextHtml:function(){var t=this.thumbnailText;return rl.isNonNullStr(t)?this._thumbnailTextTpl.assign({thumbnailTextId:this.thumbnailTextId,text:t}):""},_getSummaryWrapperHtml:function(){if(!(rl.isNonNullStr(this.summary)||this.summaryView&&this.summaryViewType))return"";var t=this._getMoreLinkDetail();return this._summaryWrapperTpl.assign({summaryCtnId:this.summaryCtnId,topMoreLinkHtml:t.tHtml,bottomMoreLinkHtml:t.bHtml,summary:this._getSummary()})},_getSummary:function(){return this.summaryView||this.summaryViewType?"":this.summary},_getMoreLinkDetail:function(){var t=this.moreLink;if(!rl.isNonNullStr(t))return{};var i,l,e,a={},n=this.moreLinkPosition.toLowerCase()||"br";return i=n.charAt(0),l=n.charAt(1),e=this._moreLinkAlign2Css[l],a[i+"Html"]=this._moreLinkTpl.assign({moreLinkCtnId:this.moreLinkCtnId,moreLink:t,alignCss:e}),a},_getDetailHtml:function(){var t=this.detail;return rl.isNonNullStr(t)?this._detailTpl.assign({detailCtnId:this.detailCtnId,detail:t}):""},initSummaryView:function(){this.summaryView||(this.summaryView=this.createSummaryView())},createSummaryView:function(){var t=rl.dataBox[this.summaryViewType];if(t){var i={owner:this,autoRenderOnReady:!1,renderTarget:this.summaryCtnId};return new t(rl.fill(i,this.summaryViewOptions))}rl.debug(this+"->createSummaryView(): Invalid summaryViewType= "+this.summaryViewType,"err")},_renderSummaryView:function(){this.summaryView&&this.summaryView.loadData(this.summary)},loadData:function(t){if(!rl.isObject(t)){var i=this+"-> loadData(): Invalid data = "+t;throw rl.debug(this+" msg = "+i),{description:i}}this._rawData=t,this.data=t=rl.isFunction(this.dataConvert)?this.dataConvert.call(this.dataConvertScope||this,t):t,this._rendered?this.updateView(t):(rl.ext(this,t),this.render())},updateView:function(){},toString:function(){return"[object rl.dataBox.KpiViewNodeDetail]"}}})});