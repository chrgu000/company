/**
 * @fileOverview Extend rl.data util methods.
 * @change
 	#1 by prcjack Creates file.
 */
orderjs.define("lib.data.engine",function(){function pad(e){return 10>e?"0"+e:e}function encodeString(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"s"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function encodeArray(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(encodeObj(e[n]));return 0==t.length?"[]":"["+t.join(",")+"]"}function encodeDate(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+" "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'}function encodeObj(e){if(void 0===e)return"undefined";if(null===e)return"null";if(e instanceof Array)return encodeArray(e);if(e instanceof Date)return encodeDate(e);if(e&&!e.hasOwnProperty||e==window||e==document||rl.isElement(e))return rl.data.ENCODER_UNKNOWN(e);switch(typeof e){case"string":return encodeString(e);case"function":return encodeString(String(e));case"number":return isFinite(e)?String(e):"null";case"object":if(arguments[1]!==nested&&(depth=0),depth++,depth>rl.data.MAX_DEPTH_ENCODE)return rl.data.ENCODER_OVERFLOW(e);var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&(n=e[t],r.push(encodeString(t),":",encodeObj(n,nested),","));return depth=0,r.pop(),["{",r.join(""),"}"].join("");default:return String(e)}}var depth=0,nested={},escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};rl.ext(rl.data,{MAX_DEPTH_ENCODE:25,ENCODER_UNKNOWN:function(){return"@UNKNOWN"},ENCODER_OVERFLOW:function(){return"@OVERFLOW"},_FSTpl:new rl.util.Template('<input name="{name}" value="{value}" type="hidden" />'),basicSort:function(e,t){return e.localeCompare?e.localeCompare(t):t>e?-1:e>t?1:0},pinyinSort:function(){},encode2FS:function(e){if(!e)return"";if(!rl.isObject(e))return e;var t,n,r=[],i=function(e){r.push(rl.data.getOneFS(n,e))};for(n in e)t=e[n],rl.isArray(t)?Array.each(i,t,this):(rl.isObject(t)&&rl.isFunction(t.getValue)&&(value=t.getValue()),r.push(rl.data.getOneFS(n,t)));return r.join("")},getOneFS:function(e,t){return rl.data._FSTpl.assign({name:e,value:t})},encode2QS:function(e){if(!e)return"";if(!rl.isObject(e))return e;var t,n,r=[],i=encodeURIComponent,a=function(e,t){r.push(i(e),"=",i(t),"&")},o=function(e){a(n,e)};for(n in e)t=e[n],rl.isArray(t)?Array.each(o,t):(rl.isObject(t)&&rl.isFunction(t.getValue)&&(value=t.getValue()),a(n,t));return r.pop(),r.join("")},encodeForm2QS:function(e){if(rl.isNonNullStr(e)&&(e=document.getElementById(e)||document.forms[e]),!e)return"";var t,n,r,i,a,o="",u=encodeURIComponent,s=function(e,t){o+=u(e)+"="+u(t)+"&"};return Array.each(function(e){if(i=e.disabled,t=e.name,n=e.value,r=e.type,!i&&t&&r)switch(r.toLowerCase()){case"text":case"select-one":s(t,n);break;case"select-multiple":for(var o=0,u=e.options.length;u>o;o++)a=e.options[o],a.selected&&(n=rl.IE?a.attributes.value.specified?a.value:a.text:a.hasAttribute("value")?a.value:a.text,s(t,n));break;case"radio":case"checkbox":e.checked&&s(t,n);break;case void 0:case"file":case"reset":case"button":break;default:s(t,n)}},e.elements),o=o.substr(0,o.length-1)},decode:function(jsonStr){return eval("("+jsonStr+")")},decodeQS:function(e,t){if(!rl.isNonNullStr(e))return null;var n,r,i,a,o=rl.data.reInt,u=rl.data.reFloat,s={};return Array.each(function(e){a=e.split("="),n=a[0],r=decodeURIComponent(a[1]),t&&(o.test(r)?r=parseInt(r):u.test(r)&&(r=parseFloat(r))),i=s[n],rl.isArray(i)?i.push(r):i=void 0!==i?[i,r]:r,s[n]=i},e.split("&")),s},encode:encodeObj}),function(){rl.data.IMap=rl.createClass({construct:function(){rl.isPrototyping(arguments[0])||(this._store={})},members:{add:function(e,t){if(rl.isNonNullStr(e)){var n=this._store;return e=e.toLowerCase(),n[e]&&rl.debug(this+"-> add(): Overriding existed item = "+e,"warn"),n[e]=t,!0}if(rl.isObject(e)){for(var r in e)this.add(r,e[r]);return!0}},get:function(e){return rl.isNonNullStr(e)?(e=e.toLowerCase(),this._store[e]):void 0},hasKey:function(e){return rl.isNonNullStr(e)?(e=e.toLowerCase(),this._store.hasOwnProperty(e)):void 0},toString:function(){return"[object rl.data.IMap]"}}})}(),function(){rl.data.MixedMap=rl.createClass({construct:function(){rl.isPrototyping(arguments[0])||(this._keys=[],this._items=[])},members:{add:function(e,t){var n,r=this._keys,i=this._items;return e=e||r.length,n=r.indexOf(e),n>-1?(r[n]=e,i[n]=t):(r.push(e),i.push(t)),t},addAll:function(e,t){e=e||[],Array.each(function(t,n){this.add(e[n],t)},t,this)},remove:function(e){var t=this._items,n=t.indexOf(e);return n>-1&&(this._keys.removeAt(n),t.removeAt(n)),e},removeAt:function(e){var t,n=this._keys;return isNaN(e)&&(e=n.indexOf(e)),e>-1&&(n.removeAt(e),t=this._items.removeAt(e)),t},removeAll:function(){this._keys.length=0,this._items.length=0},get:function(e){var t=this._keys.indexOf(e);return this._items[t]},getKey:function(e){var t=this._items.indexOf(e);return this._keys[t]},hasKey:function(e){return this._keys.contains(e)},contains:function(e){return this._items.contains(e)},each:function(e,t){if(rl.isFunction(e)){var n=this._items;Array.each(function(r,i){e.call(t,n[i],r,i)},this._keys)}},filter:function(e,t){if(!rl.isFunction(e))return[];var n=this._items;return Array.filter(function(r,i){return e.call(t,n[i],r,i)},this._keys)},toString:function(){return"[object rl.data.MixedMap]"}}})}()});