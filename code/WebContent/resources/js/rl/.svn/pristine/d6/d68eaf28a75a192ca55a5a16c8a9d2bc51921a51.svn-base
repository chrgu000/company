/**
 * @fileOverview Base util class for reading list data.
 * @change
 	#1 by prcjack Creates file.
 */
orderjs.define("lib.data.bridge.ListVisitor",["lib.data.engine"],function(){rl.data.ListVisitor=rl.createClass({construct:function(t){rl.isPrototyping(arguments[0])||(rl.ext(this,t),this.fields&&this.setFields(this.fields),this.data&&this.setData(this.data))},members:{fields:void 0,data:void 0,rspRoot:"",rspRecords:"record",rspMeta:"page",rspPagesTotal:"total",rspRecordsTotal:"recordsTotal",rspRecordStart:"startRow",rspRecordEnd:"endRow",readingIndex:-1,readResponse:function(t){if(!t)return null;var r=t,e={},s=rl.isNonNullStr;return s(this.rspRoot)&&(r=this.getRspNode(t,this.rspRoot)),e.data=this.getRspNodes(r,this.rspRecords,t),s(this.rspMeta)&&(e.meta=this.getRspNode(r,this.rspMeta,t)),e},getRspNode:function(t,r){return rl.data.ListVisitor.getByPath(t,r)},getRspNodes:function(t,r){return rl.data.ListVisitor.getByPath(t,r)},getValue:function(t){var r=this.readingRecord;return r?r[t]:void 0},setFields:function(t){if(rl.isArray(t))for(var r,e=this.fields=[],s=0,i=t.length;i>s;s++)cfg=t[s],r=rl.isNonNullStr(cfg)?{name:cfg}:rl.ext({},cfg),e.push(r)},setData:function(t){return t?(this.data=t,this):this},resetIndex:function(){this.readingIndex=-1},read:function(){var t,r=this.data,e=r.length;return e>0?(t=++this.readingIndex,this.readingRecord=r[t],this.readingRecord?!0:(this.resetIndex(),!1)):!1},toString:function(){return"[object rl.data.ListVisitor]"}}}),rl.data.ListVisitor.getByPath=function(root,path){var re=/[\[\.]/;return re.test(path)?eval("root."+path):root[path]}});