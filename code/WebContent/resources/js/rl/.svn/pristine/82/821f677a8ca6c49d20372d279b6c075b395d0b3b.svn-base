orderjs.define("lib.dnd.move",["lib.data.engine","lib.dnd.drag"],function(){var e=rl.util.CustomUIEventsMgr,t=rl.dnd.drag;rl.ext(t,{_dndMoveStartDataStore:{X:0,Y:0,clientX:0,clientY:0},_dndMoveScopes:new rl.data.MixedMap,_dndMoveB4StartHandler:function(e){var n,r=rl.ew,d=this,l=d.getDragTarget;if(rl.isFunction(l)&&(n=l.call(d.scope,e)),n=n||rl.getDom(d.target),rl.isElement(n)){d.target=n;var a=t._dndMoveStartDataStore,o=n.style;a.X=parseInt(o.left),a.Y=parseInt(o.top),a.clientX=r.clientX(),a.clientY=r.clientY(),d.cancelBubble&&r.stopBubble()}},_dndMovingHandler:function(){var e=rl.ew,n=this,r=n.target;if(rl.isElement(r)){var d=t._dndMoveStartDataStore,l=n.setXY||t._dndMoveSetXY,a=e.clientX(),o=e.clientY(),i=a-d.clientX,v=o-d.clientY,c=d.X+i,s=d.Y+v;l.call(n.scope,r,c,s,i,v),n.cancelBubble&&e.stopBubble()}},_dndMoveSetXY:function(e,t,n){var r=e.style;r.left=t+"px",r.top=n+"px"},toDndMovable:function(n,r){if(n=rl.getDom(n),rl.isElement(n)&&!n.RL_DND_MOVABLE){n.RL_DND_MOVABLE=!0;var d=rl.ext({target:n,cancelBubble:!0},r);t._dndMoveScopes.add(n,d),e.addEventListener(n,"beforedrag",t._dndMoveB4StartHandler,d),e.addEventListener(n,"draging",t._dndMovingHandler,d),rl.dnd.absolutize(d.target)}},unDndMovable:function(n){if(n=rl.getDom(n),rl.isElement(n)){n.RL_DND_MOVABLE=!1;var r=t._dndMoveScopes.get(n);e.removeEventListener(n,"beforedrag",t._dndMoveB4StartHandler,r),e.removeEventListener(n,"draging",t._dndMovingHandler,r)}}}),rl.toDndMovable=t.toDndMovable});