orderjs.define("app.opoa.mui.Muqtle",["lib.dom.engine","gui.Iframe","gui.menu.ToolBar","gui.tab.TabPanel","css>rl:muqtle"],function(){rl.createNamespace("rl.opoa.mui"),rl.opoa.mui.Muqtle=rl.createClass({parent:rl.gui.ComponentBase,construct:function(t){rl.isPrototyping(arguments[0])||(rl.opoa.mui.Muqtle.parent.call(this),this.initialize(t))},members:{autoRenderOnReady:!0,minWidth:800,minHeight:400,_htmlTpl:new rl.HtmlTpl('<div id="{id}" class="rl_mui_muqtle"><div id="{logoCtrlCtnId}" class="logo_ctrl_ctn"></div><div id="{headBarId}" class="head_bar"><div id="{exitCtrlCtnId}" class="eixt_ctrl_ctn"></div><div id="{userCtrlCtnId}" class="user_ctrl_ctn"></div><div id="{menuCtnId}" class="menu_ctn"></div><table class="quick_access_area" border="0" cellspacing="0" cellpadding="0"><tr><td><div id="{quickAccessBarCtnId}" class="quick_access_bar_ctn"></div></td><td class="quick_access_bar_conner">&nbsp;</td></tr></table></div><div id="{tabPanelCtnId}" class="tabpanel_ctn"></div></div>'),initialize:function(t){this._config=t||{},this.dw=new rl.dom.DomWrap,rl.isNonNullStr(this.id)||(this.id=this.autoId());var i=this.id;this.logoCtrlCtnId=i+"_logoCtrlCtn",this.exitCtrlCtnId=i+"_exitCtrlCtn",this.userCtrlCtnId=i+"_userCtrlCtn",this.quickAccessBarCtnId=i+"_quickAccessBarCtn",this.menuCtnId=i+"_menuCtn",this.tabPanelCtnId=i+"_tabPanelCtn",this.headBarId=i+"_headBar",this.autoRenderOnReady&&rl.onReady(Function.bind(this.render,this))},render:function(t){if(this._rendered)return this;t=this.getRenderTarget(t);var i;return i=this._htmlTpl.renderTo(t,{id:this.id,logoCtrlCtnId:this.logoCtrlCtnId,exitCtrlCtnId:this.exitCtrlCtnId,userCtrlCtnId:this.userCtrlCtnId,quickAccessBarCtnId:this.quickAccessBarCtnId,menuCtnId:this.menuCtnId,tabPanelCtnId:this.tabPanelCtnId,headBarId:this.headBarId},this.renderPosition),this.dw.setTarget(i),this.initView(),this._rendered=!0,this.fireEvent("render"),this},initView:function(){rl.IE?rl.$(document.documentElement).addClass("rl_mui_muqtle_full_view"):rl.$(document.body).addClass("rl_mui_muqtle_full_view"),this.dw.on("contextmenu",rl.gui.autoStopContextmenu),this.initTabPanel(),this.initQuickAccessBar(),this.initMenu(),this.initUserCtrl(),this.initLogoCtrl(),this.initExitCtrl(),this.updateCompsView(),rl.dom.viewport.on("resize",this.updateCompsView,this)},updateCompsView:function(){var t=rl.getDom(this.headBarId),i=rl.dom.viewport,e=i.getWidth(),r=i.getHeight(),n=this.tabPanel;if(rl.debug(this+" topBarEle = "+t),t){rl.debug("w = "+e+" h = "+r+" topBarEle.offsetHeight = "+t.offsetHeight);var s=this.cfg("minWidth")||this.minWidth,l=this.cfg("minHeight")||this.minHeight;s>e&&(e=s),l>r&&(r=l),this.dw.setHeight(r).setWidth(e),n&&n.setHeight(r-t.offsetHeight).setWidth(e),rl.debug(this+" w = "+e+" h = "+r);{document.documentElement}rl.$(document.body).setHeight(r).setWidth(e),rl.$(document.documentElement).setHeight(r).setWidth(e)}},initLogoCtrl:function(){return rl.isObject(this.cfg("l"))?(this.logoCtrl||(this.logoCtrl=this.createLogoCtrl()),!0):!1},createLogoCtrl:function(){function t(){}function i(){rl.$(this.logoCtrlCtnId).addClass("logo_ctrl_ctn_over")}function e(){rl.$(this.logoCtrlCtnId).removeClass("logo_ctrl_ctn_over")}var r=this.cfg("l"),n=new rl.DomWrap(this.logoCtrlCtnId);return rl.isNonNullStr(r.tip)&&(n.dom.title=r.tip),rl.isNonNullStr(r.logoSprite)&&n.setStyle({backgroundImage:"url("+r.logoSprite+")"}),n.on("mousedown",t,this).on("mouseover",i,this).on("mouseout",e,this),n},initExitCtrl:function(){return rl.isObject(this.cfg("e"))?(this.exitCtrl||(this.exitCtrl=this.createExitCtrl()),!0):!1},createExitCtrl:function(){function t(){rl.$(this.exitCtrlCtnId).addClass("eixt_ctrl_ctn_over")}function i(){rl.$(this.exitCtrlCtnId).removeClass("eixt_ctrl_ctn_over")}var e=this.cfg("e"),r=new rl.DomWrap(this.exitCtrlCtnId);return rl.isNonNullStr(e.tip)&&(r.dom.title=e.tip),r.on("mouseover",t,this).on("mouseout",i,this).on("click",e.action,this),r},initUserCtrl:function(){return rl.isObject(this.cfg("u"))?(this.userCtrl||(this.userCtrl=this.createUserCtrl()),!0):!1},createUserCtrl:function(){return new rl.gui.menu.ToolBar({renderTarget:this.userCtrlCtnId,autoRenderOnReady:!0,items:[new rl.gui.menu.MenuSplit("-"),this.cfg("u")]})},initQuickAccessBar:function(){return rl.isObject(this.cfg("q"))?(this.quickAccessBar||(this.quickAccessBar=this.createQuickAccessBar()),!0):!1},createQuickAccessBar:function(){var t=this.cfg("q"),i=t.items||[];return new rl.gui.menu.ToolBar({renderTarget:this.quickAccessBarCtnId,action:t.action,autoRenderOnReady:!0,items:i})},initMenu:function(){return rl.isObject(this.cfg("m"))?(this.menu||(this.menu=this.createMenu()),!0):!1},createMenu:function(){var t=this.cfg("m"),i=t.items||[];return new rl.gui.menu.ToolBar({renderTarget:this.menuCtnId,autoRenderOnReady:!0,action:t.action,items:i})},initTabPanel:function(){return rl.isObject(this.cfg("t"))?(this.tabPanel||(this.tabPanel=this.createTabPanel()),!0):!1},createTabPanel:function(){{var t=this.cfg("t");t.items||[]}return new rl.gui.tab.TabPanel(rl.ext({renderTarget:this.tabPanelCtnId,autoRenderOnReady:!0,headBarCfg:{bScrollerStart:60}},t))},cfg:function(t,i){var e=this._config;if(e)return arguments.length>1?void(e[t]=i):e[t]},toString:function(){return"[object rl.opoa.mui.Muqtle]"}}})});