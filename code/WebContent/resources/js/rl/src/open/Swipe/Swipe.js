/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 * @change
 	#1 by Brad Birdsall Swipe 2.0
 	#2 by prcjack @2015/04/14 Defines as orderjs module. Expose begin() & stop() methods, fix begin().
 *
*/
orderjs.define("open.Swipe.Swipe",["open.jquery.jquery"],function(){function t(t,n){"use strict";function e(){h=E.children,h.length<2&&(n.continuous=!1),v.transitions&&n.continuous&&h.length<3&&(E.appendChild(h[0].cloneNode(!0)),E.appendChild(E.children[1].cloneNode(!0)),h=E.children),w=new Array(h.length),p=h.length,m=t.getBoundingClientRect().width||t.offsetWidth,E.style.width=h.length*m+"px";for(var e=h.length;e--;){var i=h[e];i.style.width=m+"px",i.setAttribute("data-index",e),v.transitions&&(i.style.left=e*-m+"px",a(e,y>e?-m:e>y?m:0,0))}v.transitions||(E.style.left=y*-m+"px"),t.style.visibility="visible"}function i(){y?r(y-1):n.continuous&&r(h.length-1)}function o(){y<h.length-1?r(y+1):n.continuous&&r(0)}function r(t,e){if(y!=t){if(v.transitions){for(var i=Math.abs(y-t)-1,o=Math.abs(y-t)/(y-t);i--;)a((t>y?t:y)-i-1,m*o,0);a(y,m*o,e||T),a(t,0,e||T)}else d(y*-m,t*-m,e||T);y=t,f(n.callback&&n.callback(y,h[y]))}}function a(t,n,e){s(t,n,e),w[t]=n}function s(t,n,e){var i=h[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate("+n+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+n+"px)")}function d(t,e,i){if(!i)return void(E.style.left=e+"px");var o=+new Date,r=setInterval(function(){var a=+new Date-o;return a>i?(E.style.left=e+"px",g&&u(),n.transitionEnd&&n.transitionEnd.call(event,y,h[y]),void clearInterval(r)):void(E.style.left=(e-t)*(Math.floor(a/i*100)/100)+t+"px")},4)}function u(){x=setTimeout(o,g)}function c(){g=0,clearTimeout(x)}var l=function(){},f=function(t){setTimeout(t||l,0)},v={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var n=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var e in n)if(void 0!==t.style[n[e]])return!0;return!1}(document.createElement("swipe"))};if(t){var h,w,m,p,E=t.children[0];n=n||{};var x,b,y=parseInt(n.startSlide,10)||0,T=n.speed||300,g=n.auto||0,L={},k={},D={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":f(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":f(this.transitionEnd(t));break;case"resize":f(e.call())}n.stopPropagation&&t.stopPropagation()},start:function(t){var n=t.touches[0];L={x:n.pageX,y:n.pageY,time:+new Date},b=void 0,k={},E.addEventListener("touchmove",this,!1),E.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){n.disableScroll&&t.preventDefault();var e=t.touches[0];k={x:e.pageX-L.x,y:e.pageY-L.y},"undefined"==typeof b&&(b=!!(b||Math.abs(k.x)<Math.abs(k.y))),b||(t.preventDefault(),c(),k.x=k.x/(!y&&k.x>0||y==h.length-1&&k.x<0?Math.abs(k.x)/m+1:1),s(y-1,k.x+w[y-1],0),s(y,k.x+w[y],0),s(y+1,k.x+w[y+1],0))}},end:function(){var t=+new Date-L.time,e=Number(t)<250&&Math.abs(k.x)>20||Math.abs(k.x)>m/2,i=!y&&k.x>0||y==h.length-1&&k.x<0,o=k.x<0;b||(e&&!i?(o?(a(y-1,-m,0),a(y,w[y]-m,T),a(y+1,w[y+1]-m,T),y+=1):(a(y+1,m,0),a(y,w[y]+m,T),a(y-1,w[y-1]+m,T),y+=-1),n.callback&&n.callback(y,h[y])):(a(y-1,-m,T),a(y,0,T),a(y+1,m,T))),E.removeEventListener("touchmove",D,!1),E.removeEventListener("touchend",D,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==y&&(g&&u(),n.transitionEnd&&n.transitionEnd.call(t,y,h[y]))}};return e(),g&&u(),v.addEventListener?(v.touch&&E.addEventListener("touchstart",D,!1),v.transitions&&(E.addEventListener("webkitTransitionEnd",D,!1),E.addEventListener("msTransitionEnd",D,!1),E.addEventListener("oTransitionEnd",D,!1),E.addEventListener("otransitionend",D,!1),E.addEventListener("transitionend",D,!1)),window.addEventListener("resize",D,!1)):window.onresize=function(){e()},{begin:function(){g=n.auto||0,u()},stop:function(){c()},setup:function(){e()},slide:function(t,n){r(t,n)},prev:function(){c(),i()},next:function(){c(),o()},getPos:function(){return y},getNumSlides:function(){return p},kill:function(){c(),E.style.width="auto",E.style.left=0;for(var t=h.length;t--;){var n=h[t];n.style.width="100%",n.style.left=0,v.transitions&&s(t,0,0)}v.addEventListener?(E.removeEventListener("touchstart",D,!1),E.removeEventListener("webkitTransitionEnd",D,!1),E.removeEventListener("msTransitionEnd",D,!1),E.removeEventListener("oTransitionEnd",D,!1),E.removeEventListener("otransitionend",D,!1),E.removeEventListener("transitionend",D,!1),window.removeEventListener("resize",D,!1)):window.onresize=null}}}}return(window.jQuery||window.Zepto)&&!function(n){n.fn.Swipe=function(e){return this.each(function(){n(this).data("Swipe",new t(n(this)[0],e))})}}(window.jQuery||window.Zepto),t});