/*! JsRender v1.0.0-beta: http://github.com/BorisMoore/jsrender and http://jsviews.com/jsviews
informal pre V1.0 commit counter: 53 */
/*
 * Optimized version of jQuery Templates, for rendering to string.
 * Does not require jQuery, or HTML DOM
 * Integrates with JsViews (http://jsviews.com/jsviews)
 *
 * Copyright 2014, Boris Moore
 * Released under the MIT License.
 */
!function(t,e,n){"use strict";function r(t){return t}function a(t){return t}function i(t){ve._dbgMode=t,I=t?"Unavailable (nested view): use #getIndex()":"",ge("dbg",de.dbg=le.dbg=t?a:r)}function s(t){return{getTgt:t,map:function(e){var n=this;if(n.src!==e&&(n.src&&n.unmap(),"object"==typeof e)){var r=t.apply(n,arguments);n.src=e,n.tgt=r}}}}function o(t,e){e&&e.onError&&e.onError(t)===!1||(this.name=(M.link?"JsViews":"JsRender")+" Error",this.message=t||this.name)}function u(t,e){var n;t=t||{};for(n in e)t[n]=e[n];return t}function p(t,e,n){return(!fe.rTag||t)&&(J=t?t.charAt(0):J,K=t?t.charAt(1):K,V=e?e.charAt(0):V,D=e?e.charAt(1):D,L=n||L,t="\\"+J+"(\\"+L+")?\\"+K,e="\\"+V+"\\"+D,U="(?:(?:(\\w+(?=[\\/\\s\\"+V+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+V+"]|\\"+V+"(?!\\"+D+"))*?)",fe.rTag=U+")",U=new RegExp(t+U+"(\\/)?|(?:\\/(\\w+)))"+e,"g"),F=new RegExp("<.*>|([^\\\\]|^)[{}]|"+t+".*"+e)),[J,K,V,D,L]}function c(t,e){e||(e=t,t=n);var r,a,i,s,o=this,u=!e||"root"===e;if(t){if(s=o.type===e?o:n,!s)if(r=o.views,o._.useKey){for(a in r)if(s=r[a].get(t,e))break}else for(a=0,i=r.length;!s&&i>a;a++)s=r[a].get(t,e)}else if(u)for(;o.parent.parent;)s=o=o.parent;else for(;o&&!s;)s=o.type===e?o:n,o=o.parent;return s}function l(){var t=this.get("item");return t?t.index:n}function d(){return this.index}function g(e){var r,a=this,i=a.linkCtx,s=(a.ctx||{})[e];return s===n&&i&&i.ctx&&(s=i.ctx[e]),s===n&&(s=de[e]),s&&me(s)&&!s._wrp&&(r=function(){return s.apply(this&&this!==t?this:a,arguments)},r._wrp=1,u(r,s)),r||s}function f(t,e,r){var a,i,s,o=+r===r&&r,u=e.linkCtx;if(o&&(r=(o=e.tmpl.bnds[o-1])(e.data,e,ue)),i=r.args[0],t||o){a=u&&u.tag||{_:{inline:!u,bnd:o},tagName:t+":",flow:!0,_is:"tag"};for(s in r.props)Y.test(s)&&(a[s]=r.props[s]);u&&(u.tag=a,a.linkCtx=a.linkCtx||u,r.ctx=N(r.ctx,u.view.ctx)),a.tagCtx=r,r.view=e,a.ctx=r.ctx||{},delete r.ctx,e._.tag=a,i=m(a,a.convert||"true"!==t&&t)[0],i=i!=n?i:"",i=o&&e._.onRender?e._.onRender(i,e,o):i,e._.tag=n}return i}function m(t,e){var n=t.tagCtx,r=n.view,a=n.args;return e=e&&(""+e===e?r.getRsc("converters",e)||j("Unknown converter: '"+e+"'"):e),a=a.length||n.index||!t.autoBind?e?a.slice():a:[r.data],e&&(e.depends&&(t.depends=fe.getDeps(t.depends,t,e.depends,e)),a[0]=e.apply(t,a)),a}function v(t,e){for(var r,a,i=this;r===n&&i;)a=i.tmpl[t],r=a&&a[e],i=i.parent;return r||ue[t][e]}function h(t,e,r,a,i){var s,o,p,c,l,d,g,f,v,h,x,w,_,y,b,C,R,A,T,$,E="",S=+a===a&&a,M=e.linkCtx||0,B=e.ctx,U=r||e.tmpl;for("tag"===t._is&&(o=t,t=o.tagName),o=o||M.tag,S&&(a=(w=U.bnds[S-1])(e.data,e,ue)),g=a.length,d=0;g>d;d++){if(v=a[d],T=v.props,x=v.tmpl,x=v.content=x&&U.tmpls[x-1],r=v.props.tmpl,d||r&&o||(_=e.getRsc("tags",t)||j("Unknown tag: {{"+t+"}}")),r=r||(o?o:_).template||x,r=""+r===r?e.getRsc("templates",r)||ce(r):r,u(v,{tmpl:r,render:k,index:d,view:e,ctx:N(v.ctx,B)}),!o){_._ctr?(o=new _._ctr,y=!!o.init,o.attr=o.attr||_.attr||n):o={render:_.render},o._={inline:!M},M&&(M.attr=o.attr=M.attr||o.attr,M.tag=o,o.linkCtx=M),(o._.bnd=w||M.fn)?o._.arrVws={}:o.dataBoundOnly&&j("{^{"+t+"}} tag must be data-bound"),o.tagName=t,o.parent=l=B&&B.tag,o._is="tag",o._def=_;for(A in T=v.props)Y.test(A)&&(o[A]=T[A])}v.tag=o,o.map&&o.tagCtxs&&(v.map=o.tagCtxs[d].map),o.flow||(h=v.ctx=v.ctx||{},p=o.parents=h.parentTags=B&&N(h.parentTags,B.parentTags)||{},l&&(p[l.tagName]=l),h.tag=o)}for(o.tagCtxs=a,e._.tag=o,o.rendering={},d=0;g>d;d++)v=o.tagCtx=a[d],T=v.props,R=m(o,o.convert),(b=T.map||o).map&&(R.length||T.map)&&(C=v.map=u(v.map||{unmap:b.unmap},T),C.src!==R[0]&&(C.src&&C.unmap(),b.map.apply(C,R)),R=[C.tgt]),o.ctx=v.ctx,!d&&y&&($=o.template,o.init(v,M,o.ctx),y=n,o.template!==$&&(o._.tmpl=o.template)),f=n,s=o.render,(s=o.render)&&(f=s.apply(o,R)),R=R.length?R:[e],f=f!==n?f:v.render(R[0],!0)||(i?n:""),E=E?E+(f||""):f;return delete o.rendering,o.tagCtx=o.tagCtxs[0],o.ctx=o.tagCtx.ctx,o._.inline&&(c=o.attr)&&c!==ae&&(E="text"===c?le.html(E):""),S&&e._.onRender?e._.onRender(E,e,S):E}function x(t,e,n,r,a,i,s,o){var u,p,f,m="array"===e,h={key:0,useKey:m?0:1,id:""+ne++,onRender:o,bnds:{}},x={data:r,tmpl:a,content:s,views:m?[]:{},parent:n,type:e,get:c,getIndex:d,getRsc:v,hlp:g,_:h,_is:"view"};return n?(u=n.views,p=n._,p.useKey?(u[h.key="_"+p.useKey++]=x,x.index=I,x.getIndex=l,f=p.tag,h.bnd=m&&(!f||!!f._.bnd&&f)):u.splice(h.key=x.index=i,0,x),x.ctx=t||n.ctx):x.ctx=t,x}function w(t){var e,n,r,a,i;for(e in oe)if(a=oe[e],(i=a.compile)&&(n=t[e+"s"]))for(r in n)n[r]=i(r,n[r],t,e,a)}function _(t,e,n){var r,a;return me(e)?e={depends:e.depends,render:e}:((a=e.template)&&(e.template=""+a===a?ce[a]||ce(a):a),e.init!==!1&&(r=e._ctr=function(){},(r.prototype=e).constructor=r)),n&&(e._parentTmpl=n),e}function y(r,a,i,s,o,u){function p(n){if(""+n===n||n.nodeType>0){try{l=n.nodeType>0?n:!F.test(n)&&e&&e(t.document).find(n)[0]}catch(a){}return l&&(n=l.getAttribute(ie),r=r||n,n=ce[n],n||(r=r||"_"+ee++,l.setAttribute(ie,r),n=ce[r]=y(r,l.innerHTML,i,s,o,u)),l=null),n}}var c,l;return a=a||"",c=p(a),u=u||(a.markup?a:{}),u.tmplName=r,i&&(u._parentTmpl=i),!c&&a.markup&&(c=p(a.markup))&&(!c.fn||c.debug===a.debug&&c.allowCode===a.allowCode||(c=c.markup)),c!==n?(r&&!i&&(se[r]=function(){return a.render.apply(a,arguments)}),c.fn||a.fn?c.fn&&(a=r&&r!==c.tmplName?N(u,c):c):(a=b(c,u),A(c.replace(z,"\\$&"),a)),w(u),a):void 0}function b(t,e){var n,r=ve.wrapMap||{},a=u({markup:t,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:k},e);return e.htmlTag||(n=W.exec(t),a.htmlTag=n?n[1].toLowerCase():""),n=r[a.htmlTag],n&&n!==r.div&&(a.markup=M.trim(a.markup)),a}function C(t,e){function r(i,s,o){var u,p,c,l;if(i&&""+i!==i&&!i.nodeType&&!i.markup){for(c in i)r(c,i[c],s);return ue}return s===n&&(s=i,i=n),i&&""+i!==i&&(o=s,s=i,i=n),l=o?o[a]=o[a]||{}:r,p=e.compile,(u=fe.onBeforeStoreItem)&&(p=u(l,i,s,p)||p),i?null===s?delete l[i]:l[i]=p?s=p(i,s,o,t,e):s:s=p(n,s),p&&s&&(s._is=t),(u=fe.onStoreItem)&&u(l,i,s,p),s}var a=t+"s";ue[a]=r,oe[t]=e}function k(t,e,r,a,i,s){var o,u,p,c,l,d,g,f,m,v,h,w,_,y=this,b=!y.attr||y.attr===ae,C="";if(!!e===e&&(r=e,e=n),i===!0&&(g=!0,i=0),y.tag?(f=y,y=y.tag,v=y._,w=y.tagName,_=v.tmpl||f.tmpl,e=N(e,y.ctx),m=f.content,f.props.link===!1&&(e=e||{},e.link=!1),a=a||f.view,t=arguments.length?t:a):_=y.jquery&&(y[0]||j('Unknown template: "'+y.selector+'"'))||y,_&&(!a&&t&&"view"===t._is&&(a=t),a&&(m=m||a.content,s=s||a._.onRender,t===a&&(t=a.data),e=N(e,a.ctx)),a&&a.data!==n||((e=e||{}).root=t),_.fn||(_=ce[_]||ce(_)),_)){if(s=(e&&e.link)!==!1&&b&&s,h=s,s===!0&&(h=n,s=a._.onRender),e=_.helpers?N(_.helpers,e):e,M.isArray(t)&&!r)for(c=g?a:i!==n&&a||x(e,"array",a,t,_,i,m,s),o=0,u=t.length;u>o;o++)p=t[o],l=x(e,"item",c,p,_,(i||0)+o,m,s),d=_.fn(p,l,ue),C+=c._.onRender?c._.onRender(d,l):d;else c=g?a:x(e,w||"data",a,t,_,i,m,s),v&&!y.flow&&(c.tag=y),C+=_.fn(t,c,ue);return h?h(C,c):C}return""}function j(t){throw new fe.Err(t)}function R(t){j("Syntax error\n"+t)}function A(t,e,n,r){function a(e){e-=l,e&&g.push(t.substr(l,e).replace(H,"\\n"))}function i(e){e&&R('Unmatched or missing tag: "{{/'+e+'}}" in template:\n'+t)}function s(s,c,m,v,h,x,w,_,y,b,C,k){x&&(h=":",v=ae),b=b||n;var j,A,T=c&&[],N="",E="",S="",M=!b&&!h&&!w;m=m||(y=y||"#data",h),a(k),l=k+s.length,_?p&&g.push(["*","\n"+y.replace(Z,"$1")+"\n"]):m?("else"===m&&(P.test(y)&&R('for "{{else if expr}}" use "{{else expr}}"'),T=f[6],f[7]=t.substring(f[7],k),f=d.pop(),g=f[3],M=!0),y&&(y=y.replace(H," "),N=$(y,T,e).replace(G,function(t,e,n){return e?S+=n+",":E+=n+",",u=u||Y.test(n.split(":")[0]),""})),E=E.slice(0,-1),N=N.slice(0,-1),j=E&&E.indexOf("noerror:true")+1&&E||"",o=[m,v||!!r||u||"",N,M&&[],'\n	params:"'+y+'",\n	props:{'+E+"}"+(S?",ctx:{"+S.slice(0,-1)+"}":""),j,T||0],g.push(o),M&&(d.push(f),f=o,f[7]=l)):C&&(A=f[0],i(C!==A&&"else"!==A&&C),f[7]=t.substring(f[7],k),f=d.pop()),i(!f&&C),g=f[3]}var o,u,p=e&&e.allowCode,c=[],l=0,d=[],g=c,f=[,,,c];return i(d[0]&&d[0][3].pop()[0]),t.replace(U,s),a(t.length),(l=c[c.length-1])&&i(""+l!==l&&+l[7]===l[7]&&l[0]),T(c,n?t:e,n)}function T(t,n,r){var a,i,s,o,u,p,c,l,d,g,f,m,v,h,x,w,_,y,C,k,j,A,$,N,E,S=0,M="",B="",U={},F=t.length;for(""+n===n?(x=r?'data-link="'+n.replace(H," ").slice(1,-1)+'"':n,n=0):(x=n.tmplName||"unnamed",n.allowCode&&(U.allowCode=!0),n.debug&&(U.debug=!0),m=n.bnds,h=n.tmpls),a=0;F>a;a++)if(i=t[a],""+i===i)M+='\nret+="'+i+'";';else if(s=i[0],"*"===s)M+=""+i[1];else{if(o=i[1],u=i[2],y=i[3],p=i[4],B=i[5],C=i[7],(A="else"===s)||(S=0,m&&(v=i[6])&&(S=m.push(v))),($=":"===s)?(o&&(s=o===ae?">":o+s),B&&(N="prm"+a,B="try{var "+N+"=["+u+"][0];}catch(e){"+N+'="";}\n',u=N)):(y&&(w=b(C,U),w.tmplName=x+"/"+s,T(y,w),h.push(w)),A||(_=s,j=M,M=""),k=t[a+1],k=k&&"else"===k[0]),p+=",\n	args:["+u+"]}",$&&(v||o&&o!==ae)){if(E=new Function("data,view,j,u"," // "+x+" "+S+" "+s+"\n"+B+"return {"+p+";"),E.paths=v,E._ctxs=s,r)return E;f=1}if(M+=$?"\n"+(v?"":B)+(r?"return ":"ret+=")+(f?(f=0,g=!0,'c("'+o+'",view,'+(v?(m[S-1]=E,S):"{"+p)+");"):">"===s?(l=!0,"h("+u+");"):(d=!0,"(v="+u+")!="+(r?"=":"")+'u?v:"";')):(c=!0,"{view:view,tmpl:"+(y?h.length:"0")+","+p+","),_&&!k){if(M="["+M.slice(0,-1)+"]",(r||v)&&(M=new Function("data,view,j,u"," // "+x+" "+S+" "+_+"\nreturn "+M+";"),v&&((m[S-1]=M).paths=v),M._ctxs=s,r))return M;M=j+'\nret+=t("'+_+'",view,this,'+(S||M)+");",v=0,_=0}}M="// "+x+"\nvar j=j||"+(e?"jQuery.":"js")+"views"+(d?",v":"")+(c?",t=j._tag":"")+(g?",c=j._cnvt":"")+(l?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(ve.tryCatch?"try{\n":"")+(U.debug?"debugger;":"")+M+(r?"\n":"\nreturn ret;\n")+(ve.tryCatch?"\n}catch(e){return j._err(e);}":"");try{M=new Function("data,view,j,u",M)}catch(I){R("Compiled template code:\n\n"+M,I)}return n&&(n.fn=M),M}function $(t,e,n){function r(r,g,f,m,v,h,x,w,_,y,b,C,k,j,T,N,E,S,M,B){function U(t,n,r,o,u,p,c,l){if(r&&(e&&("linkTo"===a&&(i=e._jsvto=e._jsvto||[],i.push(v)),(!a||s)&&e.push(v.slice(n.length))),"."!==r)){var d=(o?'view.hlp("'+o+'")':u?"view":"data")+(l?(p?"."+p:o?"":u?"":"."+r)+(c||""):(l=o?"":u?p||"":r,""));return d+=l?"."+l:"",n+("view.data"===d.slice(0,9)?d.slice(5):d)}return t}var F;return h=h||"",f=f||g||C,v=v||_,y=y||E||"",!x||d||l?(e&&N&&!d&&!l&&(!a||s||i)&&(F=p[c],B.length-1>M-F&&(F=B.slice(F,M+1),N=K+":"+F+V,N=o[N]=o[N]||A(J+N+D,n,!0),N.paths||$(F,N.paths=[],n),(i||e).push({_jsvOb:N}))),d?(d=!k,d?r:'"'):l?(l=!j,l?r:'"'):(f?(c++,p[c]=M++,f):"")+(S?c?"":a?(a=s=i=!1,"\b"):",":w?(c&&R(t),a=v,s=m,"\b"+v+":"):v?v.split("^").join(".").replace(Q,U)+(y?(u[++c]=!0,"."!==v.charAt(0)&&(p[c]=M),y):h):h?h:T?(u[c--]=!1,T+(y?(u[++c]=!0,y):"")):b?(u[c]||R(t),","):g?"":(d=k,l=j,'"'))):void R(t)}var a,i,s,o=n.links,u={},p={0:-1},c=0,l=!1,d=!1;return(t+" ").replace(/\)\^/g,").").replace(q,r)}function N(t,e){return t&&t!==e?e?u(u({},e),t):t:e&&u({},e)}function E(t){return re[t]||(re[t]="&#"+t.charCodeAt(0)+";")}function S(t){var e,n,r=[];if("object"==typeof t)for(e in t)n=t[e],n&&n.toJSON&&!n.toJSON()||me(n)||r.push({key:e,prop:t[e]});return r}if(!(e&&e.views||t.jsviews)){var M,B,U,F,I,O="v1.0.0-beta",J="{",K="{",V="}",D="}",L="^",Q=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,q=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,H=/[ \t]*(\r\n|\n|\r)/g,Z=/\\(['"])/g,z=/['"\\]/g,G=/\x08(~)?([^\x08]+)\x08/g,P=/^if\s/,W=/<(\w+)[>\s]/,X=/[\x00`><"'&]/g,Y=/^on[A-Z]|^convert(Back)?$/,te=X,ee=0,ne=0,re={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ae="html",ie="data-jsv-tmpl",se={},oe={template:{compile:y},tag:{compile:_},helper:{},converter:{}},ue={jsviews:O,render:se,settings:function(t){u(ve,t),i(ve._dbgMode),ve.jsv&&ve.jsv()},sub:{View:x,Err:o,tmplFn:A,cvt:m,parse:$,extend:u,err:j,syntaxErr:R,isFn:function(t){return"function"==typeof t},DataMap:s},_cnvt:f,_tag:h,_err:function(t){return ve._dbgMode?"Error: "+(t.message||t)+". ":""}};(o.prototype=new Error).constructor=o,l.depends=function(){return[this.get("item"),"index"]},d.depends=function(){return["index"]};for(B in oe)C(B,oe[B]);var pe,ce=ue.templates,le=ue.converters,de=ue.helpers,ge=ue.tags,fe=ue.sub,me=fe.isFn,ve=ue.settings;e?(M=e,M.fn.render=k,(pe=M.observable)&&(u(fe,pe.sub),delete pe.sub)):(M=t.jsviews={},M.isArray=Array&&Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),M.render=se,M.views=ue,M.templates=ce=ue.templates,ve({debugMode:i,delimiters:p,_dbgMode:!0,tryCatch:!0}),ge({"else":function(){},"if":{render:function(t){var e=this,n=e.rendering.done||!t&&(arguments.length||!e.tagCtx.index)?"":(e.rendering.done=!0,e.selected=e.tagCtx.index,e.tagCtx.render(e.tagCtx.view,!0));return n},onUpdate:function(t,e,n){var r,a,i;for(r=0;(a=this.tagCtxs[r])&&a.args.length;r++)if(a=a.args[0],i=!a!=!n[r].args[0],!this.convert&&a||i)return i;return!1},flow:!0},"for":{render:function(t){var e,r=this,a=r.tagCtx,i="",s=0;return r.rendering.done||((e=!arguments.length)&&(t=a.view.data),t!==n&&(i+=a.render(t,e),s+=M.isArray(t)?t.length:1),(r.rendering.done=s)&&(r.selected=a.index)),i},flow:!0,autoBind:!0},include:{flow:!0,autoBind:!0},"*":{render:r,flow:!0}}),ge({props:u(u({},ge["for"]),s(S))}),ge.props.autoBind=!0,le({html:function(t){return t!=n?String(t).replace(te,E):""},attr:function(t){return t!=n?String(t).replace(X,E):null===t?t:""},url:function(t){return t!=n?encodeURI(String(t)):null===t?t:""}}),p()}}(this,this.jQuery);