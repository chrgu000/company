orderjs.define("lib.util.CustomUIEventsMgr",["lib.data.engine"],function(){rl.util.UIEvent=rl.createClass({construct:function(){rl.isPrototyping(arguments[0])||(this._dataStore=new rl.data.MixedMap)},members:{regTarget:function(t,e){var r=this._dataStore;r.hasKey(t)||(r.add(t,new rl.util.Event),rl.isFunction(e)&&e(t))},unRegTarget:function(t,e){var r=this._dataStore;r.hasKey(t)||(r.removeAt(t),rl.isFunction(e)&&e(t))},addListener:function(t,e,r){var n=this._dataStore;n.hasKey(t)||this.regTarget(t);var i=n.get(t);i&&i.addHandler(e,r)},removeListener:function(t,e,r){var n=this._dataStore,i=n.get(t);i&&i.removeHandler(e,r)},fire:function(t){var e,r=this._dataStore,n=r.get(t);return n&&(e=n.fire.apply(n,Array.slice(arguments,1))),e},clear:function(){var t=this._dataStore;t.each(function(t){t&&t&&t.clear()}),t.removeAll()},toString:function(){return"[object rl.util.UIEvent]"}}}),rl.createNamespace("rl.util.CustomUIEventsMgr",{cancelBubble:!1,cancelDefault:!1,_UIEvents:{},_UIEventSourceInitializations:{},_UIEventSourceDestructions:{},regEvent:function(t,e,r){rl.isNonNullStr(t)&&(t=t.toLowerCase(),rl.isFunction(e)&&(this._UIEventSourceInitializations[t]=e),rl.isFunction(r)&&(this._UIEventSourceDestructions[t]=r))},stopTargetUIEvent:function(t,e){if(rl.isNonNullStr(e)&&t){e=e.toLowerCase();var r=this._UIEvents[e];r instanceof rl.util.UIEvent&&r.unRegTarget(t,this._UIEventSourceDestructions[e])}},addEventListener:function(t,e,r,n){if(rl.isNonNullStr(e)&&t){var i=this._UIEvents,e=e.toLowerCase(),a=i[e];a instanceof rl.util.UIEvent||(a=i[e]=new rl.util.UIEvent),a.regTarget(t,this._UIEventSourceInitializations[e]),a.addListener(t,r,n)}},removeEventListener:function(t,e,r,n){if(rl.isNonNullStr(e)&&t){var i=this._UIEvents[e.toLowerCase()];i instanceof rl.util.UIEvent&&i.removeListener(t,r,n)}},fireTargetEvent:function(t,e){if(!rl.isNonNullStr(e)||!t)return!1;var r=this._UIEvents[e.toLowerCase()];if(r instanceof rl.util.UIEvent){var n;try{n=r.fire(t)}catch(i){}if(!this.cancelBubble&&!rl.GECKO){var a=t.parentNode||t.parent;if(a){var o=this.fireTargetEvent(a,e);o===!1&&(n=o)}}return n}},clear:function(){var t,e=this._UIEvents;try{for(var r in e)t=e[r],t&&t.clear&&t.clear()}catch(n){alert(n)}},toString:function(){return"[object rl.util.CustomUIEventsMgr]"}}),function(){var t=rl.util.CustomUIEventsMgr,e=Function.bind(t.clear,t);rl.dom._attachEvent(window,"unload",e)}()});