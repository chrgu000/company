orderjs.define("lib.util.perfTester",function(){!function(){rl.createNamespace("rl.util.perfTester",{PERF_TIME_LIMIT:200,PERF_AVG_TIMES:5,getValidCycTimes:function(e){for(var t,r,n,i=1,f=rl.util.perfTester.PERF_TIME_LIMIT||200;;){for(t=new Date,r=0;i>r;r++)e();if(n=new Date-t,n>f)break;i*=n>200?2:n>100?4:n>50?8:16}return i},testPerf:function(e,t){var r,n,i=0,f=rl.util.perfTester.PERF_AVG_TIMES||10,u=rl.util.perfTester.getValidCycTimes(e),s=f*u;Function.delay(function(){if(f>0){for(r=new Date,n=0;u>n;n++)e();i+=new Date-r,f-=1,Function.delay(arguments.callee,1e3)}else Function.defer(t,null,i,s)},1e3)},testBatchPerf:function(e,t){if(rl.isArray(e)){var r=e.concat(),n=r.shift();if(!n)return;var i=rl.util.perfTester;t=t||i.reportTestPerf,i.testPerf(n,function(e,f){t(e,f,n),Function.delay(function(){i.testBatchPerf(r,t)},1e3)})}},reportTestPerf:function(e,t,r){var n={times:t,cost:e,per:e/t},i=rl.util.perfTester.getFuncName(r);"anonymous"==i&&(i=String(r).substring(0,100)),rl.dir(n,"test perf: "+i)},getFuncName:function(e){var t="anonymous",r=/^\s*\bfunction\s*?(\w+?)\s*?\(/,n=String(e).match(r);return n&&(t=n[1]),t}})}()});