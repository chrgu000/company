orderjs.define("lib.data.store.engine",["lib.data.engine"],function(){rl.data.Storage=rl.createClass({construct:function(t){rl.isPrototyping(arguments[0])||(this.name=t,this.initialize())},members:{name:void 0,initialize:function(){if(!rl.isNonNullStr(this.name))throw{description:this+"->initialize(): Invalid name."};this._dataStore={}},add:function(t,e){return rl.isNonNullStr(t)?(rl.isString(e)||(e=rl.data.encode(e)),e=encodeURIComponent(e),this._dataStore[t]=e,t):void 0},get:function(t){var e=this._dataStore[t];return rl.isString(e)?decodeURIComponent(e):void 0},remove:function(t){var e=this.get(t);return rl.isString(e)&&delete this._dataStore[t],e},clear:function(){return this._dataStore={},this},toString:function(){return"[object rl.data.Storage]"}}}),rl.data.StoreHelper=rl.createClass({parent:rl.util.EventProvider,construct:function(t){rl.isPrototyping(arguments[0])||(rl.ext(this,t),this.initialize())},members:{storageType:rl.data.Storage,_storages:null,_state:"enabled",initialize:function(){this._storages={}},createStorage:function(t){var e=this._storages,r=e[t];return r||(r=new this.storageType(t),e[r.name]=r),r},openStorage:function(t){return this._storages[t]},removeStorage:function(t){var e=this._storages,r=e[t];return delete e[t],r},canServe:function(){return"enabled"==this._state},getState:function(){return this._state},setState:function(t){if(rl.isNonNullStr(t)){var e=this._state;t=t.toLowerCase(),t!=e&&(this._state=t,this.fireEvent("stateChange",t,e))}return this},toString:function(){return"[object rl.data.StoreHelper]"}}})});