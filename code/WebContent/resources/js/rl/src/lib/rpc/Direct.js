orderjs.define("lib.rpc.Direct",["lib.data.engine","lib.dom.engine","lib.rpc.SdtHelper","lib.rpc.SdtService"],function(){rl.rpc.Direct=rl.createClass({parent:rl.util.EventProvider,construct:function(e){rl.isPrototyping(arguments[0])||(rl.rpc.Direct.parent.apply(this,arguments),rl.isObject(e)&&(e.services||e.stopAutoConfigServices||(e.services=e),rl.ext(this,e)),this.initialize())},members:{services:null,serviceType:rl.rpc.SdtService,observeServiceEvents:["loading","complete","success","failure","RequestStateChange"],initialize:function(){this.initServices()},initServices:function(){var e,i,r=this._cfgServices=this.services;this.services={};for(e in r)i=r[e],this.services[e]=this.createService(e,i),this.createDirectMethod(e)},createService:function(e,i){var r=new this.serviceType(i);return Array.each(function(i){r.on(i,Function.curry(this.hndServiceEvent,e,i),this)},this.observeServiceEvents,this),r},hndServiceEvent:function(e,i){var r=[e+"."+i].concat(Array.slice(arguments,2));return this.fireEvent.apply(this,r)},createDirectMethod:function(e){this[rl.rpc.serviceDirectMethodPrefix+e]=Function.curry(this.invoke,e)},invoke:function(e){var i=this.services[e],r=Array.slice(arguments,1);if(i&&rl.isFunction(i.invoke))return i.invoke.apply(i,r);throw new Error("Cant find valid service named "+e)},toString:function(){return"[object rl.rpc.Direct]"}}}),rl.ext(rl.rpc,{serviceDirectMethodPrefix:"d_"})});