orderjs.define("lib.rpc.SimpleStatusResponse",["lib.rpc.engine"],function(){rl.rpc.SimpleStatusResponse=rl.createClass({parent:rl.util.EventProvider,construct:function(t){rl.isPrototyping(arguments[0])||(rl.rpc.SimpleStatusResponse.parent.call(this,t),rl.ext(this,t),this.initialize())},members:{sendData:null,onSuccess:null,onFailure:null,httpRequestType:rl.rpc.XHRequest,httpRequest:null,initialize:function(){this.initHttpRequest(),rl.isFunction(this.onSuccess)&&this.on("success",this.onSuccess,this),rl.isFunction(this.onFailure)&&this.on("failure",this.onFailure,this)},initHttpRequest:function(){this.httpRequest||(this.httpRequest=this.createHttpRequest());var t=this.httpRequest;if(!(t instanceof rl.rpc.AbstractHR))throw{description:this+"->initialize(): Invalid httpRequest!"};t.on("success",this.hndSuccessRequest,this),t.on("failure",this.hndFailureRequest,this),t.on("timeout",this.hndTimeoutRequest,this)},createHttpRequest:function(){return new this.httpRequestType({responseType:"xml",disableCache:!0,async:!0,sendData:this.sendData})},request:function(t){return this.isRequesting()?this:(delete this.data,this.httpRequest.request(t),this)},reRequest:function(){return this.request(this.httpRequest._requestOptions)},isRequesting:function(){return this.httpRequest.requesting},abort:function(){return this.isRequesting()&&this.httpRequest.abort(),this.fireEvent("abort"),this},readXmlResponse:function(t){if(!t||1!=t.nodeType||"undefined"==typeof t.hasChildNodes||!t.hasChildNodes())return null;var e,s,i,n={},u={};return Array.each(function(t){1===t.nodeType&&(i=t.firstChild,i&&3===i.nodeType&&(e=i.nodeValue,s=t.tagName,n[s]?(rl.isArray(u[s])||(u[s]=[e]),u[s].push(e)):(u[s]=e,n[s]=!0)))},t.childNodes),u},hndSuccessRequest:function(t,e){var s=this.httpRequest.responseType||"",i=t;if(s.equalsIgnoreCase("xml")&&(i=this.readXmlResponse(t)),i&&rl.isNonNullStr(i.status)){var n=i.status.trim().toLowerCase();this.data=i,this.fireEvent("success",n,i,t,e)}else this.hndFailureRequest(e)},hndFailureRequest:function(t){this.fireEvent("failure",t)},hndTimeoutRequest:function(){this.fireEvent("timeout"),this.hndFailureRequest(this.httpRequest)},toString:function(){return"[object rl.rpc.SimpleStatusResponse]"}}})});