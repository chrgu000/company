orderjs.define("lib.rpc.SdtService",["lib.data.engine","lib.dom.engine","lib.rpc.engine","lib.rpc.SdtHelper"],function(){rl.rpc.SdtService=rl.createClass({parent:rl.rpc.SdtHelper,construct:function(r){rl.isPrototyping(arguments[0])||(rl.isString(r)&&(r={url:r}),rl.rpc.SdtService.parent.call(this,r))},members:{url:"",params:null,expectRspType:"json",initialize:function(){rl.rpc.SdtService.parent.prototype.initialize.call(this),this.initParams()},initParams:function(){var r,t,i={},e={},n=this.params;for(var a in n)r=n[a],rl.isNonNullStr(r)&&(t=r.split("="),rl.isNonNullStr(t[0])&&(i[a]=t[0]),rl.isNonNullStr(t[1])&&(e[a]=t[1]));this._paramsMapping=i,this._paramsDefaults=e},invoke:function(r,t,i){var e=this.sendData,n={url:this.url,onSuccess:t,onFailure:i};return e?n.url=this.getWholeUrl(r):n.sendData=this.getSendParams(r),this.request(n),this},getWholeUrl:function(r){var t=this.url;return rl.isString(t)?t+=(t.contains("?")?"&":"?")+this.getSendParams(r):void 0},getSendParams:function(r){var t,i,e,n=this._paramsMapping,a=this._paramsDefaults;e=rl.ext({},r),rl.fill(e,a);for(t in n)i=n[t],rl.isDefined(e[t])&&(e[i]=e[t],delete e[t]);return rl.data.encode2QS(e)},setParamName:function(r,t){return this._paramsMapping[r]=t,this},setParamDefaults:function(r,t){return this._paramsDefaults[r]=t,this},toString:function(){return"[object rl.rpc.SdtService]"}}})});