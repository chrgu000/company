orderjs.define("lib.lang.Date",function(){rl.fill(Date.prototype,{defaultFormat:"%Y-%m-%d %H:%M:%S",getDayOfYear:function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()-1},getWeekOfYear:function(e){rl.isNumber(e)||(e=Date.startDay);var t=this.getFirstDateOfMonth(0).getDay()-e,a=this.getDayOfYear()+1,r=a-(7-t);return 0>=r?1:Math.ceil(r/7)+1},getDaysInMonth:function(){var e=this.getMonth();return 1===e&&this.isLeapYear()?29:Date.daysInMonth[e]},isLeapYear:function(){var e=this.getFullYear();return!(e%400&&(e%4||!(e%100)))},getFirstDateOfMonth:function(e){return isNaN(e)&&(e=this.getMonth()),new Date(this.getFullYear(),e,1)},getLastDateOfMonth:function(e){return isNaN(e)&&(e=this.getMonth()),new Date(this.getFullYear(),e,this.getDaysInMonth())},clearTime:function(){return this.setHours(0,0,0,0),this},clone:function(){return new Date(this.getTime())},add:function(e,t){if(!(t>0||0>t))return this;rl.isNonNullStr(e)||(e=Date.DAY);var a=!1,r=this.getDate(),s="Date";switch(e.toLowerCase()){case Date.DAY:break;case Date.CENTURY:t*=100;case Date.DECADE:t*=10;case Date.YEAR:s="FullYear",a=!0;break;case Date.WEEK:t*=7;break;case Date.QUARTER:t*=3;case Date.MONTH:a=!0,s="Month";break;case Date.HOUR:s="Hours";break;case Date.MINUTE:s="Minutes";break;case Date.SECOND:s="Seconds";break;case Date.MILLISECOND:s="Milliseconds"}return this["set"+s](this["get"+s]()+t),a&&this.getDate()<r&&this.setDate(0),this},format:function(e){rl.isNonNullStr(e)||(e=this.defaultFormat);var t=this.getMonth(),a=this.getDate(),r=this.getFullYear(),s=this.getWeekOfYear(),n=this.getDay(),o={},i=this.getHours(),h=i>=12,D=h?i-12:i;0==D&&(D=12);var u=this.getDayOfYear(),c=this.getMinutes(),l=this.getSeconds();o["%a"]=Date.getShortDayName(n),o["%A"]=Date.dayNames[n],o["%b"]=Date.getShortMonthName(t),o["%B"]=Date.monthNames[t],o["%C"]=1+Math.floor(r/100),o["%d"]=10>a?"0"+a:a,o["%e"]=a,o["%H"]=10>i?"0"+i:i,o["%I"]=10>D?"0"+D:D,o["%j"]=100>u?10>u?"00"+u:"0"+u:u,o["%k"]=i,o["%l"]=D,o["%m"]=9>t?"0"+(1+t):1+t,o["%M"]=10>c?"0"+c:c,o["%n"]="\n",o["%p"]=h?"PM":"AM",o["%P"]=h?"pm":"am",o["%s"]=Math.floor(this.getTime()/1e3),o["%S"]=10>l?"0"+l:l,o["%t"]="	",o["%U"]=o["%W"]=o["%V"]=10>s?"0"+s:s,o["%u"]=n+1,o["%day"]=n,o["%y"]=(""+r).substr(2,2),o["%Y"]=r,o["%%"]="%";for(var g=/%./g,N=e.match(g),M=0;M<N.length;M++){var m=o[N[M]];m&&(g=new RegExp(N[M],"g"),e=e.replace(g,m))}return e},compare:function(e,t){var a=this,r=e;return rl.isNonNullStr(t)&&(a=this.clone(),r=e.clone(),t=t.toLowerCase(),"date"===t?(a.clearTime(),r.clearTime()):"time"===t&&(a.setFullYear(0,0,1),r.setFullYear(0,0,1))),a>r?1:r>a?-1:0}}),function(){rl.ext(Date,{MILLISECOND:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",WEEK:"w",MONTH:"mo",QUARTER:"q",YEAR:"y",DECADE:"dc",CENTURY:"c",startDay:0,daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],dayNames:rl.getG11nSource("dayNames")||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:rl.getG11nSource("shortDayNames")||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:rl.getG11nSource("monthNames")||["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:rl.getG11nSource("shortMonthNames")||["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],getShortMonthName:function(e){return Date.shortMonthNames[e]},getShortDayName:function(e){return Date.shortDayNames[e]},getMonthNumber:function(e){var t=-1,a=new RegExp("^"+e,"i");return Array.find(function(e,r){return a.test(e)?(t=r,!0):void 0},Date.monthNames),t},parseDate:function(e,t){if(!rl.isNonNullStr(e))return Number.NaN;var a=new Date,r=0,s=-1,n=0,o=e.split(/\W+/),i=t.match(/%./g),h=0,D=0,u=0,c=0;for(h=0;h<o.length;++h)if(o[h])switch(i[h]){case"%d":case"%e":n=parseInt(o[h],10);break;case"%m":s=parseInt(o[h],10)-1;break;case"%Y":case"%y":r=parseInt(o[h],10),100>r&&(r+=r>29?1900:2e3);break;case"%b":case"%B":for(D=0;12>D;++D)if(Date.monthNames[D].substr(0,o[h].length).toLowerCase()==o[h].toLowerCase()){s=D;break}break;case"%H":case"%I":case"%k":case"%l":u=parseInt(o[h],10);break;case"%P":case"%p":/pm/i.test(o[h])&&12>u?u+=12:/am/i.test(o[h])&&u>=12&&(u-=12);break;case"%M":c=parseInt(o[h],10)}if(isNaN(r)&&(r=a.getFullYear()),isNaN(s)&&(s=a.getMonth()),isNaN(n)&&(n=a.getDate()),isNaN(u)&&(u=a.getHours()),isNaN(c)&&(c=a.getMinutes()),0!=r&&-1!=s&&0!=n)return new Date(r,s,n,u,c,0);for(r=0,s=-1,n=0,h=0;h<o.length;++h)if(-1!=o[h].search(/[a-zA-Z]+/)){var l=-1;for(D=0;12>D;++D)if(Date.monthNames[D].substr(0,o[h].length).toLowerCase()==o[h].toLowerCase()){l=D;break}-1!=l&&(-1!=s&&(n=s+1),s=l)}else parseInt(o[h],10)<=12&&-1==s?s=o[h]-1:parseInt(o[h],10)>31&&0==r?(r=parseInt(o[h],10),100>r&&(r+=r>29?1900:2e3)):0==n&&(n=o[h]);return 0==r&&(r=a.getFullYear()),-1!=s&&0!=n?new Date(r,s,n,u,c,0):a},diff:function(e,t,a){t=t||new Date,a=a||Date.DAY;var r=t.getFullYear()-e.getFullYear(),s=1;switch(a.toLowerCase()){case Date.QUARTER:var n=e.getMonth(),o=t.getMonth(),i=Math.floor(n/3)+1,h=Math.floor(o/3)+1;h+=4*r,s=h-i;break;case Date.CENTURY:s=100;case Date.DECADE:s=10;case Date.YEAR:s*=r;break;case Date.MONTH:s=t.getMonth()-e.getMonth()+12*r;break;case Date.WEEK:s=parseInt(Date.diff(e,t,"day")/7);break;case Date.DAY:s/=24;case Date.HOUR:s/=60;case Date.MINUTE:s/=60;case Date.SECOND:s/=1e3;case Date.MILLISECOND:s*=t.getTime()-e.getTime()}return Math.round(s)}})}()});